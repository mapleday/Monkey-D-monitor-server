<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sohu.sns.monitor.common.dao.httpResource.HttpResourceDAO">
    <cache flushInterval="300"/>

    <select id="getResources" resultType="com.sohu.sns.monitor.common.module.HttpResource">
        SELECT id as id,
            resource_name as resourceName,
            resource_address as resourceAddress,
            monitor_time_out as monitorTimeOut,
            monitor_time_interval as monitorInterval,
            monitor_times as monitorTimes,
            alarm_threshold_times as alarmThresholdTimes
        FROM
          t_monitor_http_resource t
        WHERE
          t.status=1
    </select>

    <select id="getAllResources" resultType="com.sohu.sns.monitor.common.module.HttpResource">
        SELECT id as id,
        resource_name as resourceName,
        resource_address as resourceAddress,
        monitor_time_out as monitorTimeOut,
        monitor_time_interval as monitorInterval,
        monitor_times as monitorTimes,
        alarm_threshold_times as alarmThresholdTimes,
        status as stat
        FROM
        t_monitor_http_resource
    </select>

    <update id="updateResource" parameterType="com.sohu.sns.monitor.common.module.HttpResource">
        UPDATE t_monitor_http_resource
        <set>
            <if test="resourceName!=null">resource_name=#{resourceName},</if>
            <if test="resourceAddress!=null">resource_address=#{resourceAddress},</if>
            <if test="monitorTimeOut!=null">monitor_time_out=#{monitorTimeOut},</if>
            <if test="monitorInterval!=null">monitor_time_interval=#{monitorInterval},</if>
            <if test="monitorTimes!=null">monitor_times=#{monitorTimes},</if>
            <if test="alarmThresholdTimes!=null">alarm_threshold_times=#{alarmThresholdTimes},</if>
            <if test="stat!=null">status=#{stat}</if>
        </set>
        WHERE id=#{id}
    </update>

    <delete id="deleteResource" parameterType="com.sohu.sns.monitor.common.module.HttpResource">
        DELETE FROM  t_monitor_http_resource WHERE id=#{id}
    </delete>

    <insert id="createResource" parameterType="com.sohu.sns.monitor.common.module.HttpResource" useGeneratedKeys="true" keyProperty="id" >
        INSERT into  t_monitor_http_resource
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!=null">id,</if>
            <if test="resourceName!=null">resource_name,</if>
            <if test="resourceAddress!=null">resource_address,</if>
            <if test="monitorTimeOut!=null">monitor_time_out,</if>
            <if test="monitorInterval!=null">monitor_time_interval,</if>
            <if test="monitorTimes!=null">monitor_times,</if>
            <if test="alarmThresholdTimes!=null">alarm_threshold_times,</if>
            <if test="stat!=null">status</if>
        </trim>
        VALUES
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id!=null">#{id},</if>
            <if test="resourceName!=null">#{resourceName},</if>
            <if test="resourceAddress!=null">#{resourceAddress},</if>
            <if test="monitorTimeOut!=null">#{monitorTimeOut},</if>
            <if test="monitorInterval!=null">#{monitorInterval},</if>
            <if test="monitorTimes!=null">#{monitorTimes},</if>
            <if test="alarmThresholdTimes!=null">#{alarmThresholdTimes},</if>
            <if test="stat!=null">#{stat}</if>
        </trim>
    </insert>
</mapper>